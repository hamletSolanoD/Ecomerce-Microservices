# üöÄ ServiceHub: Plataforma de E-commerce para Servicios Digitales

![Estado](https://img.shields.io/badge/Estado-Desarrollo-orange)
![Versi√≥n](https://img.shields.io/badge/Versi√≥n-1.0.0-blue)
![Node](https://img.shields.io/badge/Node.js-16%2B-brightgreen)
![MongoDB](https://img.shields.io/badge/MongoDB-Activo-green)
![NextJS](https://img.shields.io/badge/NextJS-13%2B-blueviolet)
![React](https://img.shields.io/badge/React-18%2B-blue)
![Licencia](https://img.shields.io/badge/Licencia-MIT-yellow)

## üìã √çndice
- [Descripci√≥n](#-descripci√≥n)
- [Arquitectura](#-arquitectura)
- [Microservicios](#-microservicios)
- [Tecnolog√≠as](#-tecnolog√≠as)
- [Instalaci√≥n](#-instalaci√≥n)
- [Configuraci√≥n](#-configuraci√≥n)
- [APIs](#-apis)
- [Desarrollo](#-desarrollo)
- [Flujos Principales](#-flujos-principales)
- [Pruebas](#-pruebas)
- [Despliegue](#-despliegue)
- [Estructura de Carpetas](#-estructura-de-carpetas)
- [Contribuir](#-contribuir)
- [Licencia](#-licencia)

## üìù Descripci√≥n

ServiceHub es una plataforma moderna de e-commerce especializada en la venta y gesti√≥n de suscripciones a servicios digitales como hosting, servidores, bases de datos y otros servicios tecnol√≥gicos. Implementada como una arquitectura de microservicios, permite a los usuarios explorar un cat√°logo de productos, gestionar sus compras y administrar sus suscripciones.

La plataforma se compone de tres microservicios backend independientes y un frontend React, todos comunic√°ndose entre s√≠ a trav√©s de APIs RESTful. Cada microservicio cuenta con su propia base de datos MongoDB, asegurando la desacoplaci√≥n y escalabilidad del sistema.

## üèóÔ∏è Arquitectura

ServiceHub implementa una arquitectura de microservicios moderna con:

- **Independencia operativa:** Cada microservicio puede desarrollarse, desplegarse y escalarse de forma independiente
- **Base de datos por servicio:** Cada microservicio mantiene su propia base de datos MongoDB
- **Comunicaci√≥n v√≠a API:** Los servicios se comunican entre s√≠ mediante APIs RESTful
- **Frontend desacoplado:** Interfaz React que integra todas las funcionalidades a trav√©s de las APIs

![image](https://github.com/user-attachments/assets/86464759-d72b-4504-b1b6-00766c914a15)

> **Nota:** diagrama visual de arquitectura microservicios.

## üß© Microservicios

### 1Ô∏è‚É£ Microservicio de Usuarios (Puerto 3001)

Gestiona la autenticaci√≥n y los perfiles de usuario del sistema.

#### Caracter√≠sticas T√©cnicas
- Autenticaci√≥n JWT con expiraci√≥n de 24h
- Middleware para protecci√≥n de rutas
- Roles de usuario (ADMIN, COMPRADOR)
- Hashing de contrase√±as con bcrypt
- Patr√≥n repositorio para abstraer operaciones de BD

#### Endpoints Principales
- `POST /api/auth/register`: Registro de nuevos usuarios
- `POST /api/auth/login`: Inicio de sesi√≥n
- `GET /api/usuarios`: Listar usuarios (solo admin)
- `GET /api/usuarios/:id`: Obtener usuario espec√≠fico

### 2Ô∏è‚É£ Microservicio de Servicios (Puerto 3002)

Administra el cat√°logo de servicios disponibles con capacidades avanzadas de b√∫squeda y filtrado.

#### Caracter√≠sticas T√©cnicas
- Validaci√≥n de datos con Yup
- Manejo preciso de valores monetarios con Decimal.js
- Sistema de filtrado y b√∫squeda avanzada
- Paginaci√≥n y ordenamiento personalizable
- Control de disponibilidad temporal de servicios

#### Endpoints Principales
- `GET /api/servicios`: Listar con m√∫ltiples opciones de filtrado
- `POST /api/servicios`: Crear nuevo servicio (admin)
- `GET /api/servicios/:id`: Obtener servicio espec√≠fico
- `GET /api/categorias`: Listar categor√≠as √∫nicas

### 3Ô∏è‚É£ Microservicio de Carrito (Puerto 3003)

Gestiona el carrito de compras y las suscripciones de los usuarios.

#### Caracter√≠sticas T√©cnicas
- Sistema de suscripciones con fechas de expiraci√≥n autom√°ticas
- Tipos de planes: Mensual, Trimestral, Anual
- Estados de carrito: EN_PROCESO, COMPRADO, EXPIRADO
- Verificaci√≥n de acceso a servicios adquiridos
- Comunicaci√≥n con otros microservicios para datos enriquecidos

#### Endpoints Principales
- `GET /api/carrito`: Obtener carrito del usuario
- `POST /api/carrito`: Agregar item al carrito
- `POST /api/carrito/procesar-compra`: Procesar compra
- `GET /api/suscripciones`: Obtener suscripciones del usuario

### 4Ô∏è‚É£ Frontend React

Interfaz de usuario que integra todas las funcionalidades de los microservicios.

#### Caracter√≠sticas T√©cnicas
- Sistema de autenticaci√≥n con persistencia en localStorage
- Servicios para comunicaci√≥n con microservicios
- Interfaces adaptativas con Tailwind CSS
- Control de acceso basado en roles
- Gesti√≥n de estado con Context API
- Interceptores para tokens JWT

## üõ†Ô∏è Tecnolog√≠as

### Backend
- **Node.js** (v16+): Entorno de ejecuci√≥n para JavaScript
- **NextJS** (v13+): Framework para APIs y SSR
- **MongoDB**: Base de datos NoSQL para cada microservicio
- **JWT**: Autenticaci√≥n basada en tokens
- **Bcrypt**: Hashing seguro para contrase√±as
- **Yup**: Validaci√≥n de esquemas
- **Decimal.js**: Manejo preciso de valores monetarios
- **Axios**: Cliente HTTP para comunicaci√≥n entre servicios

### Frontend
- **React** (v18+): Biblioteca para interfaces de usuario
- **Context API**: Gesti√≥n de estado global
- **React Router**: Navegaci√≥n entre vistas
- **Tailwind CSS**: Framework de utilidades CSS
- **Axios**: Cliente HTTP para comunicaci√≥n con APIs

## üì¶ Instalaci√≥n

### Requisitos Previos
- Node.js 16+
- MongoDB (instalado localmente o instancia remota)
- npm o yarn

### Clonar el Repositorio

```bash
# Clonar el repositorio principal
git clone https://github.com/usuario/servicehub.git
cd servicehub
```

### Instalar Dependencias

Cada microservicio y el frontend necesitan tener sus dependencias instaladas por separado:

```bash
# Microservicio de Usuarios
cd microservicio-usuarios
npm install

# Microservicio de Servicios
cd ../microservicio-servicios
npm install

# Microservicio de Carrito
cd ../microservicio-carrito
npm install

# Frontend
cd ../frontend
npm install
```

## ‚öôÔ∏è Configuraci√≥n

### Variables de Entorno

Cada microservicio requiere su propio archivo `.env`. A continuaci√≥n se muestran ejemplos para cada uno:

#### Microservicio de Usuarios (.env)
```
PORT=3001
MONGODB_URI=mongodb://localhost:27017/servicehub-usuarios
JWT_SECRET=tu_clave_secreta_jwt
JWT_EXPIRATION=24h
CORS_ORIGIN=http://localhost:3000
```

#### Microservicio de Servicios (.env)
```
PORT=3002
MONGODB_URI=mongodb://localhost:27017/servicehub-servicios
CORS_ORIGIN=http://localhost:3000
```

#### Microservicio de Carrito (.env)
```
PORT=3003
MONGODB_URI=mongodb://localhost:27017/servicehub-carrito
USERS_MICROSERVICE_URL=http://localhost:3001
SERVICES_MICROSERVICE_URL=http://localhost:3002
CORS_ORIGIN=http://localhost:3000
```

#### Frontend (.env)
```
REACT_APP_USERS_API=http://localhost:3001/api
REACT_APP_SERVICES_API=http://localhost:3002/api
REACT_APP_CART_API=http://localhost:3003/api
```

## üîå APIs

### Autenticaci√≥n

Todas las rutas protegidas requieren un token JWT en el header de Authorization:

```
Authorization: Bearer <token>
```

### Ejemplos de Peticiones API

#### Registro de Usuario
```
POST http://localhost:3001/api/auth/register
Content-Type: application/json

{
  "nombre": "Usuario Ejemplo",
  "email": "usuario@ejemplo.com",
  "password": "contrase√±a123"
}
```

#### Login
```
POST http://localhost:3001/api/auth/login
Content-Type: application/json

{
  "email": "usuario@ejemplo.com",
  "password": "contrase√±a123"
}
```

#### Obtener Servicios con Filtros
```
GET http://localhost:3002/api/servicios?categoria=hosting&page=1&limit=10&activo=true
Authorization: Bearer <token>
```

#### Agregar al Carrito
```
POST http://localhost:3003/api/carrito
Content-Type: application/json
Authorization: Bearer <token>

{
  "servicioId": "id_del_servicio",
  "tipoPlan": "MENSUAL"
}
```

## üöÄ Desarrollo

### Iniciar los Servicios

Cada microservicio debe iniciarse en una terminal separada:

```bash
# Microservicio de Usuarios
cd microservicio-usuarios
npm run dev

# Microservicio de Servicios
cd microservicio-servicios
npm run dev

# Microservicio de Carrito
cd microservicio-carrito
npm run dev

# Frontend
cd frontend
npm start
```

### Puertos por Defecto
- Microservicio de Usuarios: http://localhost:3001
- Microservicio de Servicios: http://localhost:3002
- Microservicio de Carrito: http://localhost:3003
- Frontend: http://localhost:3000

## üîÑ Flujos Principales

### 1. Registro/Login
1. Usuario crea una cuenta o inicia sesi√≥n
2. Sistema genera un token JWT
3. Token se almacena en localStorage para persistencia

### 2. Exploraci√≥n de Servicios
1. Usuario navega por el cat√°logo de servicios
2. Puede filtrar por categor√≠a, buscar y paginar resultados
3. Visualiza detalles de cada servicio

### 3. Compra de Servicios
1. Usuario selecciona un servicio y el plan (Mensual/Trimestral/Anual)
2. Servicio se agrega al carrito con estado EN_PROCESO
3. Usuario procesa la compra
4. Items pasan a estado COMPRADO con fecha de expiraci√≥n calculada

### 4. Gesti√≥n de Suscripciones
1. Usuario visualiza sus suscripciones activas
2. Sistema muestra tiempo restante hasta expiraci√≥n
3. Al llegar la fecha de expiraci√≥n, las suscripciones pasan a EXPIRADO

### 5. Administraci√≥n (Solo ADMIN)
1. Administradores pueden crear/editar/eliminar servicios
2. Acceso a listado completo de usuarios
3. Gesti√≥n del cat√°logo de productos

## üß™ Pruebas

Para ejecutar las pruebas en cada microservicio:

```bash
# Ejecutar pruebas unitarias
npm run test

# Ejecutar pruebas con cobertura
npm run test:coverage
```

## üìÇ Estructura de Carpetas

### Microservicio de Usuarios
```
microservicio-usuarios/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ register/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ usuarios/
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îî‚îÄ‚îÄ Usuario.js
‚îú‚îÄ‚îÄ repositories/
‚îÇ   ‚îî‚îÄ‚îÄ UsuarioRepository.js
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ UsuarioService.js
‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îú‚îÄ‚îÄ auth.js
‚îÇ   ‚îî‚îÄ‚îÄ error.js
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îî‚îÄ‚îÄ jwt.js
‚îî‚îÄ‚îÄ ...
```

### Microservicio de Servicios
```
microservicio-servicios/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ servicios/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ categorias/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ busqueda/
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îî‚îÄ‚îÄ Servicio.js
‚îú‚îÄ‚îÄ repositories/
‚îÇ   ‚îî‚îÄ‚îÄ ServicioRepository.js
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ ServicioService.js
‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îú‚îÄ‚îÄ auth.js
‚îÇ   ‚îî‚îÄ‚îÄ error.js
‚îî‚îÄ‚îÄ ...
```

### Microservicio de Carrito
```
microservicio-carrito/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ carrito/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ suscripciones/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ acceso/
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îî‚îÄ‚îÄ CarritoCompra.js
‚îú‚îÄ‚îÄ repositories/
‚îÇ   ‚îî‚îÄ‚îÄ CarritoRepository.js
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ CarritoService.js
‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îú‚îÄ‚îÄ auth.js
‚îÇ   ‚îî‚îÄ‚îÄ error.js
‚îî‚îÄ‚îÄ ...
```

### Frontend
```
frontend/
‚îú‚îÄ‚îÄ public/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ layout/
‚îÇ   ‚îú‚îÄ‚îÄ context/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AuthContext.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CartContext.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authService.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ servicesService.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ cartService.js
‚îÇ   ‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Home.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Login.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ App.js
‚îÇ   ‚îî‚îÄ‚îÄ index.js
‚îî‚îÄ‚îÄ ...
```

## ü§ù Contribuir

1. Fork el repositorio
2. Crea una rama para tu funcionalidad (`git checkout -b feature/nueva-funcionalidad`)
3. Haz commit de tus cambios (`git commit -m 'A√±adir nueva funcionalidad'`)
4. Push a la rama (`git push origin feature/nueva-funcionalidad`)
5. Crea un Pull Request

### Gu√≠a de Estilo
- Indentaci√≥n con 2 espacios
- Nombres de variables y funciones en camelCase
- Clases en PascalCase
- Utilizar async/await para c√≥digo as√≠ncrono
- A√±adir comentarios para l√≥gica compleja

## üìÑ Licencia

Este proyecto est√° licenciado bajo la Licencia MIT - ver el archivo [LICENSE.md](LICENSE.md) para m√°s detalles.

---

Desarrollado con ‚ù§Ô∏è por [Tu Nombre/Equipo]
